{{ define "__subject" }}[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}] {{ .GroupLabels.SortedPairs.Values | join " " }} {{ if gt (len .CommonLabels) (len .GroupLabels) }}({{ with .CommonLabels.Remove .GroupLabels.Names }}{{ .Values | join " " }}{{ end }}){{ end }}{{ end }}
{{ define "__alertmanagerURL" }}{{ .ExternalURL }}/#/alerts?receiver={{ .Receiver }}{{ end }}

{{ define "default.__text_alert_list" }}{{ range . }}
---

**å‘Šè­¦ä¸»é¢˜**: {{ .Annotations.summary }}

**å‘Šè­¦ç±»å‹**: {{ .Labels.alertname }}

**å‘Šè­¦çº§åˆ«**: {{ .Labels.severity }}

**å‘Šè­¦ä¸»æœº**: {{ .Labels.instance }}

**å‘Šè­¦ä¿¡æ¯**: {{ index .Annotations "description" }}

**Graph:** [ğŸ“ˆ]({{ .GeneratorURL }})

**åˆ†ç»„åç§°**: {{ .Labels.job }}

**é€šçŸ¥éƒ¨é—¨**: {{ .Labels.team }}

**å‘Šè­¦æ—¶é—´**: {{ dateInZone "2006.01.02 15:04:05" (.StartsAt) "Asia/Shanghai" }}
{{ end }}{{ end }}

{{ define "default.__text_resolved_list" }}{{ range . }}
---

**å‘Šè­¦ä¸»é¢˜**: {{ .Annotations.summary }}

**å‘Šè­¦ç±»å‹**: {{ .Labels.alertname }}

**å‘Šè­¦çº§åˆ«**: {{ .Labels.severity }}

**å‘Šè­¦ä¸»æœº**: {{ .Labels.instance }}

**å‘Šè­¦ä¿¡æ¯**: {{ index .Annotations "description" }}

**Graph:** [ğŸ“ˆ]({{ .GeneratorURL }})

**åˆ†ç»„åç§°**: {{ .Labels.job }}

**é€šçŸ¥éƒ¨é—¨**: {{ .Labels.team }}

**å‘Šè­¦æ—¶é—´**: {{ dateInZone "2006.01.02 15:04:05" (.StartsAt) "Asia/Shanghai" }}

**æ¢å¤æ—¶é—´**: {{ dateInZone "2006.01.02 15:04:05" (.EndsAt) "Asia/Shanghai" }}
{{ end }}{{ end }}

{{/* Default */}}
{{ define "default.title" }}{{ template "__subject" . }}{{ end }}
{{ define "default.content" }}
\[{{ .Status | toUpper }}{{ if eq .Status "firing" }}:{{ .Alerts.Firing | len }}{{ end }}\] **[{{ index .GroupLabels "alertname" }}]({{ template "__alertmanagerURL" . }})**
{{ if gt (len .Alerts.Firing) 0 -}}
![è­¦æŠ¥ å›¾æ ‡](http://wx4.sinaimg.cn/large/006APoFYly1g0ggpt1aq3j306o06o3yt.jpg)

**====ä¾¦æµ‹åˆ°æ•…éšœ====**    {{ template "default.__text_alert_list" .Alerts.Firing }}
{{- end }}

{{ if gt (len .Alerts.Resolved) 0 -}}
![è­¦æŠ¥ å›¾æ ‡](https://i01piccdn.sogoucdn.com/2dbf8a9d48e921e7)

**====æ•…éšœå·²ä¿®å¤====**    {{ template "default.__text_resolved_list" .Alerts.Resolved }}
{{- end }}
{{- end }}

{{/* Following names for compatibility */}}
{{ define "ding.link.title" }}{{ template "default.title" . }}{{ end }}
{{ define "ding.link.content" }}{{ template "default.content" . }}{{ end }}
